\protected\l2j\Pwsoft_it.php мною был только этот файл протестирован и корректно настроен остальные переписаны на быструю руку.

Как правильно писать такие конфиги/модели



1. Определить таблицу (например characters).

2. Создать модель в app\models\Characters.php или в modules\....

namespace app\models;

use yii\db\ActiveRecord;

class Characters extends ActiveRecord
{
    public static function tableName()
    {
        return '{{%characters}}';
    }
}

3. Добавить связи в нужные модели.
Например, у User может быть метод:

public function getCharacters()
{
    return $this->hasMany(Characters::class, ['account_id' => 'user_id']);
}

А если нужен именно charactersQuery() — то

use yii\db\ActiveQuery;

public function charactersQuery(): ActiveQuery
{
    return $this->hasMany(Characters::class, ['account_id' => 'user_id']);
}

4. Следить за типами: если возвращаешь запрос (->hasMany() или ->hasOne()), то возвращаемый тип указываешь ActiveQuery.
Если хочешь сразу получить список — убирай Query, а вызывать будешь $user->characters вместо $user->charactersQuery()->all().